"""
CampusFlow æ ¡å›­å·¥å…·æ¨¡å—
Day 1: åŸºç¡€å·¥å…·å¼€å‘

æä¾›æ ¡å›­ç›¸å…³çš„æŸ¥è¯¢å·¥å…·ï¼š
- query_campus_map: æŸ¥è¯¢æ ¡å›­åœ°å›¾å’Œå¯¼èˆªä¿¡æ¯
- query_contact: æŸ¥è¯¢æ ¡å›­éƒ¨é—¨å’Œè”ç³»æ–¹å¼

å·¥å…·ä½¿ç”¨è¯´æ˜ï¼š
1. å·¥å…·æè¿°å†³å®š Agent æ™ºå•†ï¼Œæè¿°å¿…é¡»å‡†ç¡®æ¸…æ™°
2. å‚æ•° Schema å®šä¹‰ä½¿ç”¨ Pydantic éªŒè¯
3. é”™è¯¯å¤„ç†æä¾›å‹å¥½çš„è¿”å›ä¿¡æ¯
"""

from typing import Optional, Dict, Any, List
from langchain.tools import tool
from pydantic import BaseModel, Field


# -----------------------------------------------------------------------------
# æ ¡å›­åœ°å›¾æŸ¥è¯¢å·¥å…·
# -----------------------------------------------------------------------------

class CampusMapQueryInput(BaseModel):
    """æ ¡å›­åœ°å›¾æŸ¥è¯¢å‚æ•°"""
    location: str = Field(
        description="è¦æŸ¥è¯¢çš„åœ°ç‚¹åç§°ï¼ˆå¦‚ï¼šå›¾ä¹¦é¦†ã€é£Ÿå ‚ã€æ•™å­¦æ¥¼ã€å®¿èˆåŒºç­‰ï¼‰"
    )
    from_location: Optional[str] = Field(
        default=None,
        description="èµ·ç‚¹ä½ç½®ï¼ˆå¯é€‰ï¼‰ï¼Œç”¨äºæŸ¥è¯¢è·¯çº¿å¯¼èˆª"
    )


@tool(args_schema=CampusMapQueryInput)
def query_campus_map(location: str, from_location: Optional[str] = None) -> str:
    """
    æŸ¥è¯¢æ ¡å›­åœ°å›¾ä¿¡æ¯å’Œå¯¼èˆªè·¯çº¿
    
    ç”¨é€”ï¼š
    - æŸ¥è¯¢æ ¡å›­å»ºç­‘ç‰©çš„ä½ç½®å’ŒåŸºæœ¬ä¿¡æ¯
    - è·å–ä»æŸåœ°ç‚¹åˆ°ç›®æ ‡åœ°ç‚¹çš„è·¯çº¿å¯¼èˆª
    - æŸ¥è¯¢å»ºç­‘ç‰©å¼€æ”¾æ—¶é—´ã€æœåŠ¡è®¾æ–½ç­‰ä¿¡æ¯
    
    æŸ¥è¯¢èŒƒå›´ï¼š
    - æ•™å­¦æ¥¼ã€å›¾ä¹¦é¦†ã€å®éªŒå®¤
    - é£Ÿå ‚ã€è¶…å¸‚ã€å¿«é€’ç‚¹
    - å®¿èˆåŒºã€ä½“è‚²é¦†ã€åŒ»åŠ¡å®¤
    - æ ¡é—¨ã€åœè½¦åœºã€å…¬äº¤ç«™
    
    è¿”å›ï¼š
        åŒ…å«ä½ç½®ä¿¡æ¯å’Œå¯¼èˆªæŒ‡å¼•çš„å­—ç¬¦ä¸²
    """
    # æ¨¡æ‹Ÿæ ¡å›­åœ°å›¾æ•°æ®
    campus_locations = {
        "å›¾ä¹¦é¦†": {
            "ä½ç½®": "æ ¡å›­ä¸­å¿ƒï¼Œä¸»æ¥¼åŒ—ä¾§",
            "å¼€æ”¾æ—¶é—´": "8:00-22:00ï¼ˆå·¥ä½œæ—¥ï¼‰ï¼Œ9:00-21:00ï¼ˆå‘¨æœ«ï¼‰",
            "æœåŠ¡": "å›¾ä¹¦å€Ÿé˜…ã€è‡ªä¹ å®¤ã€ç”µå­é˜…è§ˆå®¤ã€è®¨è®ºå®¤",
            "æ¥¼å±‚": "å…±5å±‚ï¼Œ1-2å±‚ä¸ºå€Ÿé˜…åŒºï¼Œ3-5å±‚ä¸ºè‡ªä¹ åŒº"
        },
        "ç¬¬ä¸€é£Ÿå ‚": {
            "ä½ç½®": "ä¸œåŒºå®¿èˆåŒºé™„è¿‘",
            "å¼€æ”¾æ—¶é—´": "æ—©é¤6:30-9:00ï¼Œåˆé¤11:00-13:30ï¼Œæ™šé¤17:00-19:30",
            "æœåŠ¡": "æä¾›æ—©ä¸­æ™šé¤ï¼Œæ”¯æŒæ ¡å›­ä¸€å¡é€šæ”¯ä»˜",
            "ç‰¹è‰²": "äºŒå±‚æœ‰æ¸…çœŸé¤å…å’Œå°ç‚’çª—å£"
        },
        "ç¬¬äºŒé£Ÿå ‚": {
            "ä½ç½®": "è¥¿åŒºæ•™å­¦æ¥¼é™„è¿‘",
            "å¼€æ”¾æ—¶é—´": "æ—©é¤6:30-9:00ï¼Œåˆé¤11:00-13:30ï¼Œæ™šé¤17:00-20:00",
            "æœåŠ¡": "æä¾›æ—©ä¸­æ™šé¤å’Œå¤œå®µï¼Œæ”¯æŒç§»åŠ¨æ”¯ä»˜",
            "ç‰¹è‰²": "æœ‰å„åœ°é£å‘³å°åƒçª—å£"
        },
        "ä¸»æ•™å­¦æ¥¼": {
            "ä½ç½®": "æ ¡å›­å—åŒºï¼Œå›¾ä¹¦é¦†å—ä¾§",
            "å¼€æ”¾æ—¶é—´": "7:00-22:00",
            "æœåŠ¡": "ä¸Šè¯¾æ•™å®¤ã€å¤šåª’ä½“æ•™å®¤ã€é˜¶æ¢¯æ•™å®¤",
            "æ¥¼å±‚": "å…±8å±‚ï¼Œ1-4å±‚ä¸ºå°æ•™å®¤ï¼Œ5-8å±‚ä¸ºå¤§é˜¶æ¢¯æ•™å®¤"
        },
        "å®éªŒæ¥¼": {
            "ä½ç½®": "æ ¡å›­åŒ—åŒº",
            "å¼€æ”¾æ—¶é—´": "8:00-21:00ï¼ˆéœ€é¢„çº¦ï¼‰",
            "æœåŠ¡": "å„ç±»ä¸“ä¸šå®éªŒå®¤ã€è®¡ç®—æœºæˆ¿",
            "æ³¨æ„": "è¿›å…¥å®éªŒå®¤éœ€æå‰é¢„çº¦å’ŒåŸ¹è®­"
        },
        "ä½“è‚²é¦†": {
            "ä½ç½®": "æ ¡å›­ä¸œä¾§",
            "å¼€æ”¾æ—¶é—´": "6:00-22:00",
            "æœåŠ¡": "ç¯®çƒã€ç¾½æ¯›çƒã€ä¹’ä¹“çƒã€å¥èº«æˆ¿ã€æ¸¸æ³³é¦†",
            "é¢„çº¦": "æ¸¸æ³³é¦†å’Œç¾½æ¯›çƒåœºåœ°éœ€æå‰é¢„çº¦"
        },
        "å­¦ç”Ÿå®¿èˆ1å·æ¥¼": {
            "ä½ç½®": "ä¸œåŒºå®¿èˆåŒº",
            "ç±»å‹": "æœ¬ç§‘ç”Ÿå®¿èˆ",
            "é…ç½®": "4äººé—´ï¼Œç‹¬ç«‹å«æµ´ï¼Œæœ‰ç©ºè°ƒ",
            "é—¨ç¦": "23:00ï¼ˆå‘¨æœ«24:00ï¼‰"
        },
        "å­¦ç”Ÿå®¿èˆ2å·æ¥¼": {
            "ä½ç½®": "ä¸œåŒºå®¿èˆåŒº",
            "ç±»å‹": "æœ¬ç§‘ç”Ÿå®¿èˆ",
            "é…ç½®": "6äººé—´ï¼Œå…¬å…±å«ç”Ÿé—´ï¼Œæœ‰ç©ºè°ƒ",
            "é—¨ç¦": "23:00ï¼ˆå‘¨æœ«24:00ï¼‰"
        },
        "ç ”ç©¶ç”Ÿå®¿èˆ": {
            "ä½ç½®": "è¥¿åŒº",
            "ç±»å‹": "ç ”ç©¶ç”Ÿå®¿èˆ",
            "é…ç½®": "2äººé—´ï¼Œç‹¬ç«‹å«æµ´ï¼Œæœ‰ç©ºè°ƒå’Œé˜³å°",
            "é—¨ç¦": "24å°æ—¶ï¼ˆåˆ·å¡è¿›å…¥ï¼‰"
        },
        "åŒ»åŠ¡å®¤": {
            "ä½ç½®": "å®¿èˆåŒºä¸æ•™å­¦åŒºä¹‹é—´",
            "å¼€æ”¾æ—¶é—´": "24å°æ—¶æ€¥è¯Šï¼Œé—¨è¯Š8:00-17:30",
            "æœåŠ¡": "å¸¸è§ç—…è¯Šç–—ã€æ€¥æ•‘ã€å¥åº·å’¨è¯¢",
            "ç”µè¯": "021-88888888"
        },
        "å¿«é€’ä¸­å¿ƒ": {
            "ä½ç½®": "ä¸œåŒºå®¿èˆåŒºé—¨å£",
            "å¼€æ”¾æ—¶é—´": "8:00-20:00",
            "æœåŠ¡": "é¡ºä¸°ã€ä¸­é€šã€åœ†é€šã€ç”³é€šç­‰ä¸»æµå¿«é€’",
            "å–ä»¶": "å‡­å–ä»¶ç è‡ªåŠ©å–ä»¶"
        },
        "æ ¡é—¨å£": {
            "ä½ç½®": "æ ¡å›­å—ä¾§ï¼ˆä¸»æ ¡é—¨ï¼‰ã€ä¸œä¾§ï¼ˆä¸œé—¨ï¼‰",
            "äº¤é€š": "ä¸»æ ¡é—¨æœ‰åœ°é“ç«™ï¼Œä¸œé—¨æœ‰å…¬äº¤æ¢çº½",
            "é—¨ç¦": "éœ€åˆ·æ ¡å›­å¡æˆ–äººè„¸è¯†åˆ«è¿›å…¥"
        }
    }
    
    # æŸ¥æ‰¾åœ°ç‚¹ä¿¡æ¯
    location_lower = location.lower()
    found_location = None
    
    # æ¨¡ç³ŠåŒ¹é…
    for key in campus_locations.keys():
        if location_lower in key.lower() or key.lower() in location_lower:
            found_location = key
            break
    
    if not found_location:
        available = "ã€".join(campus_locations.keys())
        return f"âŒ æœªæ‰¾åˆ°åœ°ç‚¹ã€Œ{location}ã€ã€‚\n\nå¯æŸ¥è¯¢çš„åœ°ç‚¹åŒ…æ‹¬ï¼š{available}\n\nğŸ’¡ æç¤ºï¼šå¯ä»¥å°è¯•ä½¿ç”¨æ›´é€šç”¨çš„å…³é”®è¯ï¼Œå¦‚ã€Œé£Ÿå ‚ã€ã€Œå®¿èˆã€ã€Œæ•™å­¦æ¥¼ã€ç­‰ã€‚"
    
    # è·å–åœ°ç‚¹ä¿¡æ¯
    info = campus_locations[found_location]
    result = f"ğŸ“ **{found_location}**\n\n"
    
    for key, value in info.items():
        result += f"â€¢ **{key}**ï¼š{value}\n"
    
    # å¦‚æœæä¾›äº†èµ·ç‚¹ï¼Œæ·»åŠ å¯¼èˆªä¿¡æ¯
    if from_location:
        result += f"\nğŸ§­ **å¯¼èˆª**ï¼šä»ã€Œ{from_location}ã€åˆ°ã€Œ{found_location}ã€\n"
        result += "â€¢ æ¨èæ­¥è¡Œçº¦ 10-15 åˆ†é’Ÿ\n"
        result += "â€¢ æ²¿é€”ç»è¿‡ï¼šä¸»æ¥¼å¹¿åœº â†’ å›¾ä¹¦é¦† â†’ ç›®æ ‡åœ°ç‚¹\n"
        result += "â€¢ ä¹Ÿå¯ä»¥ä½¿ç”¨æ ¡å›­å¯¼èˆªå°ç¨‹åºè·å–å®æ—¶è·¯çº¿\n"
    
    return result


# -----------------------------------------------------------------------------
# æ ¡å›­è”ç³»æ–¹å¼æŸ¥è¯¢å·¥å…·
# -----------------------------------------------------------------------------

class ContactQueryInput(BaseModel):
    """è”ç³»æ–¹å¼æŸ¥è¯¢å‚æ•°"""
    department: str = Field(
        description="è¦æŸ¥è¯¢çš„éƒ¨é—¨åç§°ï¼ˆå¦‚ï¼šæ•™åŠ¡å¤„ã€å­¦ç”Ÿå¤„ã€è´¢åŠ¡å¤„ã€å›¾ä¹¦é¦†ç­‰ï¼‰"
    )


@tool(args_schema=ContactQueryInput)
def query_contact(department: str) -> str:
    """
    æŸ¥è¯¢æ ¡å›­å„éƒ¨é—¨çš„è”ç³»æ–¹å¼å’Œå·¥ä½œæ—¶é—´
    
    ç”¨é€”ï¼š
    - æŸ¥è¯¢å„éƒ¨é—¨åŠå…¬ç”µè¯å’Œé‚®ç®±
    - äº†è§£éƒ¨é—¨åŠå…¬æ—¶é—´å’Œåœ°ç‚¹
    - è·å–éƒ¨é—¨è´Ÿè´£çš„ä¸šåŠ¡èŒƒå›´
    
    å¯æŸ¥è¯¢éƒ¨é—¨ï¼š
    - æ•™åŠ¡å¤„ï¼ˆé€‰è¯¾ã€è€ƒè¯•ã€å­¦ç±ç®¡ç†ï¼‰
    - å­¦ç”Ÿå¤„ï¼ˆå­¦ç”Ÿæ´»åŠ¨ã€å¥–åŠ©å­¦é‡‘ã€å®¿èˆç®¡ç†ï¼‰
    - è´¢åŠ¡å¤„ï¼ˆç¼´è´¹ã€å¥–å­¦é‡‘å‘æ”¾ï¼‰
    - å›¾ä¹¦é¦†ï¼ˆå€Ÿé˜…ã€èµ„æºæŸ¥è¯¢ï¼‰
    - æ‹›ç”ŸåŠï¼ˆæ‹›ç”Ÿå’¨è¯¢ï¼‰
    - å°±ä¸šä¸­å¿ƒï¼ˆå°±ä¸šæŒ‡å¯¼ã€æ‹›è˜ä¿¡æ¯ï¼‰
    - å¿ƒç†å’¨è¯¢ä¸­å¿ƒï¼ˆå¿ƒç†å¥åº·æœåŠ¡ï¼‰
    - ä¿å«å¤„ï¼ˆæ ¡å›­å®‰å…¨ã€æˆ·ç±ç®¡ç†ï¼‰
    - åå‹¤å¤„ï¼ˆç»´ä¿®ã€é¤é¥®æœåŠ¡ï¼‰
    - æ ¡åŒ»é™¢ï¼ˆåŒ»ç–—æœåŠ¡ï¼‰
    
    è¿”å›ï¼š
        åŒ…å«è”ç³»æ–¹å¼ã€åŠå…¬æ—¶é—´ã€åœ°å€çš„è¯¦ç»†ä¿¡æ¯
    """
    # æ¨¡æ‹Ÿæ ¡å›­éƒ¨é—¨è”ç³»æ–¹å¼æ•°æ®
    departments = {
        "æ•™åŠ¡å¤„": {
            "ç”µè¯": "021-12345678",
            "é‚®ç®±": "jwc@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "å‘¨ä¸€è‡³å‘¨äº” 8:30-17:00",
            "åœ°å€": "è¡Œæ”¿æ¥¼ 302 å®¤",
            "ä¸šåŠ¡": "é€‰è¯¾ã€è€ƒè¯•å®‰æ’ã€å­¦ç±ç®¡ç†ã€æˆç»©æŸ¥è¯¢ã€å­¦åˆ†è®¤å®š"
        },
        "å­¦ç”Ÿå¤„": {
            "ç”µè¯": "021-12345679",
            "é‚®ç®±": "xsc@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "å‘¨ä¸€è‡³å‘¨äº” 8:30-17:00",
            "åœ°å€": "è¡Œæ”¿æ¥¼ 305 å®¤",
            "ä¸šåŠ¡": "å­¦ç”Ÿæ´»åŠ¨ã€å¥–åŠ©å­¦é‡‘ã€å®¿èˆç®¡ç†ã€è¿çºªå¤„ç†"
        },
        "è´¢åŠ¡å¤„": {
            "ç”µè¯": "021-12345680",
            "é‚®ç®±": "cwc@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "å‘¨ä¸€è‡³å‘¨äº” 8:30-16:30ï¼ˆå‘¨å››ä¸‹åˆä¸å¯¹å¤–ï¼‰",
            "åœ°å€": "è¡Œæ”¿æ¥¼ 201 å®¤",
            "ä¸šåŠ¡": "å­¦è´¹ç¼´çº³ã€å¥–å­¦é‡‘å‘æ”¾ã€æŠ¥é”€ã€æ ¡å›­å¡å……å€¼"
        },
        "å›¾ä¹¦é¦†": {
            "ç”µè¯": "021-12345681",
            "é‚®ç®±": "library@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "8:00-22:00ï¼ˆå·¥ä½œæ—¥ï¼‰ï¼Œ9:00-21:00ï¼ˆå‘¨æœ«ï¼‰",
            "åœ°å€": "å›¾ä¹¦é¦† 1 æ¥¼æœåŠ¡å°",
            "ä¸šåŠ¡": "å›¾ä¹¦å€Ÿé˜…ã€ç”µå­èµ„æºã€è‡ªä¹ å®¤é¢„çº¦ã€æ–‡çŒ®ä¼ é€’"
        },
        "æ‹›ç”ŸåŠå…¬å®¤": {
            "ç”µè¯": "021-12345682",
            "é‚®ç®±": "zs@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "å‘¨ä¸€è‡³å‘¨äº” 8:30-17:00",
            "åœ°å€": "è¡Œæ”¿æ¥¼ 101 å®¤",
            "ä¸šåŠ¡": "æœ¬ç§‘æ‹›ç”Ÿå’¨è¯¢ã€ç ”ç©¶ç”Ÿæ‹›ç”Ÿå’¨è¯¢ã€æ‹›ç”Ÿæ”¿ç­–è§£ç­”"
        },
        "å°±ä¸šæŒ‡å¯¼ä¸­å¿ƒ": {
            "ç”µè¯": "021-12345683",
            "é‚®ç®±": "jiuye@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "å‘¨ä¸€è‡³å‘¨äº” 8:30-17:00",
            "åœ°å€": "å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ 205 å®¤",
            "ä¸šåŠ¡": "å°±ä¸šæŒ‡å¯¼ã€æ‹›è˜ä¿¡æ¯å‘å¸ƒã€ç®€å†ä¿®æ”¹ã€é¢è¯•è¾…å¯¼"
        },
        "å¿ƒç†å’¨è¯¢ä¸­å¿ƒ": {
            "ç”µè¯": "021-12345684ï¼ˆ24å°æ—¶çƒ­çº¿ï¼‰",
            "é‚®ç®±": "xlzx@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "å‘¨ä¸€è‡³å‘¨äº” 8:30-21:00",
            "åœ°å€": "å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ 301 å®¤",
            "ä¸šåŠ¡": "ä¸ªä½“å¿ƒç†å’¨è¯¢ã€å›¢ä½“è¾…å¯¼ã€å¿ƒç†æµ‹è¯„ã€å±æœºå¹²é¢„"
        },
        "ä¿å«å¤„": {
            "ç”µè¯": "021-12345685ï¼ˆ24å°æ—¶ï¼‰",
            "é‚®ç®±": "bwc@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "24å°æ—¶å€¼ç­",
            "åœ°å€": "å—é—¨ä¿å«æ¥¼",
            "ä¸šåŠ¡": "æ ¡å›­å®‰å…¨ã€æˆ·ç±ç®¡ç†ã€è½¦è¾†é€šè¡Œè¯ã€å¤±ç‰©æ‹›é¢†"
        },
        "åå‹¤ç®¡ç†å¤„": {
            "ç”µè¯": "021-12345686",
            "é‚®ç®±": "hq@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "å‘¨ä¸€è‡³å‘¨äº” 8:30-17:00",
            "åœ°å€": "åå‹¤æ¥¼ 101 å®¤",
            "ä¸šåŠ¡": "å®¿èˆç»´ä¿®ã€é£Ÿå ‚ç®¡ç†ã€æ ¡å›­ç¯å¢ƒã€æ°´ç”µæŠ¥ä¿®"
        },
        "æ ¡åŒ»é™¢": {
            "ç”µè¯": "021-12345687ï¼ˆæ€¥è¯Š24å°æ—¶ï¼‰",
            "é‚®ç®±": "xyy@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "é—¨è¯Š 8:00-17:30ï¼Œæ€¥è¯Š24å°æ—¶",
            "åœ°å€": "æ ¡å›­ä¸œåŒ—è§’åŒ»åŠ¡æ¥¼",
            "ä¸šåŠ¡": "é—¨è¯Šè¯Šç–—ã€æ€¥è¯Šæ€¥æ•‘ã€ç–«è‹—æ¥ç§ã€å¥åº·ä½“æ£€"
        },
        "ä¿¡æ¯æŠ€æœ¯ä¸­å¿ƒ": {
            "ç”µè¯": "021-12345688",
            "é‚®ç®±": "its@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "å‘¨ä¸€è‡³å‘¨äº” 8:30-17:00",
            "åœ°å€": "ä¿¡æ¯æ¥¼ 102 å®¤",
            "ä¸šåŠ¡": "æ ¡å›­ç½‘ç»œã€ä¿¡æ¯ç³»ç»Ÿã€é‚®ç®±æœåŠ¡ã€ä¸€å¡é€šæŠ€æœ¯"
        },
        "å›¢å§”": {
            "ç”µè¯": "021-12345689",
            "é‚®ç®±": "tw@campus.edu.cn",
            "åŠå…¬æ—¶é—´": "å‘¨ä¸€è‡³å‘¨äº” 8:30-17:00",
            "åœ°å€": "å­¦ç”Ÿæ´»åŠ¨ä¸­å¿ƒ 101 å®¤",
            "ä¸šåŠ¡": "å›¢ç»„ç»‡å»ºè®¾ã€ç¤¾å›¢ç®¡ç†ã€å¿—æ„¿æœåŠ¡ã€ç¤¾ä¼šå®è·µ"
        }
    }
    
    # æŸ¥æ‰¾éƒ¨é—¨ä¿¡æ¯
    dept_lower = department.lower()
    found_dept = None
    
    # æ¨¡ç³ŠåŒ¹é…
    for key in departments.keys():
        if dept_lower in key.lower() or key.lower() in dept_lower:
            found_dept = key
            break
    
    if not found_dept:
        available = "ã€".join(departments.keys())
        return f"âŒ æœªæ‰¾åˆ°éƒ¨é—¨ã€Œ{department}ã€ã€‚\n\nå¯æŸ¥è¯¢çš„éƒ¨é—¨åŒ…æ‹¬ï¼š{available}\n\nğŸ’¡ æç¤ºï¼šå¯ä»¥å°è¯•å…³é”®è¯å¦‚ã€Œæ•™åŠ¡ã€ã€Œè´¢åŠ¡ã€ã€Œå›¾ä¹¦é¦†ã€ã€Œå°±ä¸šã€ç­‰ã€‚"
    
    # è·å–éƒ¨é—¨ä¿¡æ¯
    info = departments[found_dept]
    result = f"ğŸ¢ **{found_dept}**\n\n"
    
    for key, value in info.items():
        result += f"â€¢ **{key}**ï¼š{value}\n"
    
    result += "\nğŸ“Œ **å»ºè®®**ï¼šå‰å¾€å‰è¯·å…ˆç”µè¯è”ç³»ç¡®è®¤ï¼Œä»¥å…å› ä¼šè®®ç­‰åŸå› æ— äººåŠå…¬ã€‚"
    
    return result


# -----------------------------------------------------------------------------
# å·¥å…·åˆ—è¡¨ï¼ˆä¾› Agent ä½¿ç”¨ï¼‰
# -----------------------------------------------------------------------------

def get_campus_tools() -> List:
    """
    è·å–æ‰€æœ‰æ ¡å›­å·¥å…·åˆ—è¡¨
    
    Returns:
        å·¥å…·åˆ—è¡¨ï¼Œå¯ç›´æ¥ä¼ å…¥ create_react_agent
    """
    return [
        query_campus_map,
        query_contact
    ]


# -----------------------------------------------------------------------------
# æµ‹è¯•ä»£ç 
# -----------------------------------------------------------------------------

if __name__ == "__main__":
    print("=" * 60)
    print("ğŸ”§ CampusFlow æ ¡å›­å·¥å…·æµ‹è¯•")
    print("=" * 60)
    print()
    
    # æµ‹è¯•æ ¡å›­åœ°å›¾æŸ¥è¯¢
    print("ğŸ—ºï¸ æµ‹è¯• query_campus_map å·¥å…·")
    print("-" * 60)
    
    test_locations = ["å›¾ä¹¦é¦†", "é£Ÿå ‚", "å®¿èˆ", "åŒ»åŠ¡å®¤"]
    
    for location in test_locations:
        print(f"\næŸ¥è¯¢: {location}")
        result = query_campus_map.invoke({"location": location})
        print(result[:300] + "..." if len(result) > 300 else result)
    
    print()
    print("=" * 60)
    
    # æµ‹è¯•è”ç³»æ–¹å¼æŸ¥è¯¢
    print("ğŸ“ æµ‹è¯• query_contact å·¥å…·")
    print("-" * 60)
    
    test_depts = ["æ•™åŠ¡å¤„", "å›¾ä¹¦é¦†", "è´¢åŠ¡å¤„"]
    
    for dept in test_depts:
        print(f"\næŸ¥è¯¢: {dept}")
        result = query_contact.invoke({"department": dept})
        print(result[:300] + "..." if len(result) > 300 else result)
    
    print()
    print("=" * 60)
    print("âœ… å·¥å…·æµ‹è¯•å®Œæˆï¼")
    print("=" * 60)
