# ğŸ› ï¸ Python è™šæ‹Ÿç¯å¢ƒé…ç½®æŒ‡å—ï¼ˆä½¿ç”¨ uvï¼‰

## ä»€ä¹ˆæ˜¯ uvï¼Ÿ

**uv** æ˜¯ä¸€ä¸ªæé€Ÿçš„ Python åŒ…ç®¡ç†å™¨å’Œç¯å¢ƒç®¡ç†å·¥å…·ï¼Œç”± Astral å¼€å‘ï¼ˆåŒå¼€å‘ ruff çš„å›¢é˜Ÿï¼‰ã€‚ç›¸æ¯”ä¼ ç»Ÿå·¥å…·ï¼š

- âš¡ **æé€Ÿå®‰è£…**ï¼šæ¯” pip å¿« 10-100 å€
- ğŸ—‚ï¸ **ç»Ÿä¸€ç®¡ç†**ï¼šæ›¿ä»£ `pip` + `venv` + `pip-tools`
- ğŸ”§ **å…¼å®¹æ€§å¥½**ï¼šå®Œå…¨å…¼å®¹ requirements.txt
- ğŸŒ **å…¨å±€ç¼“å­˜**ï¼šèŠ‚çœç£ç›˜ç©ºé—´

---

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… uv

```bash
# å¦‚æœæœªå®‰è£…ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…
curl -LsSf https://astral.sh/uv/install.sh | sh

# éªŒè¯å®‰è£…
uv --version
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
uv venv
```

è¿™ä¼šåˆ›å»ºä¸€ä¸ª `.venv` æ–‡ä»¶å¤¹ï¼ˆæ³¨æ„å‰é¢æœ‰ä¸ªç‚¹ï¼Œè¡¨ç¤ºéšè—æ–‡ä»¶å¤¹ï¼‰ï¼ŒåŒ…å«ç‹¬ç«‹çš„ Python è§£é‡Šå™¨å’Œä¾èµ–åº“ã€‚

### 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ

**Windows:**
```bash
.venv\Scripts\activate
```

**Mac/Linux:**
```bash
source .venv/bin/activate
```

**æ¿€æ´»æˆåŠŸæ ‡å¿—ï¼š** å‘½ä»¤è¡Œå‰æ˜¾ç¤º `(.venv)`
```bash
(.venv) user@computer:~/CampusFlow$
```

### 4. å®‰è£…ä¾èµ–

**å›½å†…ç”¨æˆ·æ¨èï¼ˆä½¿ç”¨æ¸…åé•œåƒæºåŠ é€Ÿï¼‰ï¼š**
```bash
# ä½¿ç”¨ uv + å›½å†…é•œåƒï¼ˆæ¨èï¼‰
uv pip install -r requirements.txt --index-url https://pypi.tuna.tsinghua.edu.cn/simple

# æˆ–ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ
uv pip install -r requirements.txt --index-url https://mirrors.aliyun.com/pypi/simple/
```

**æµ·å¤–ç”¨æˆ·ï¼š**
```bash
uv pip install -r requirements.txt
```

**ä¼ ç»Ÿ pip æ–¹å¼ï¼š**
```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 5. é€€å‡ºè™šæ‹Ÿç¯å¢ƒ

```bash
deactivate
```

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤å¯¹æ¯”

| ä¼ ç»Ÿæ–¹å¼ (pip) | uv æ–¹å¼ | è¯´æ˜ |
|---------------|---------|------|
| `python -m venv venv` | `uv venv` | åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ |
| `source venv/bin/activate` | `source .venv/bin/activate` | æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ |
| `pip install -r requirements.txt` | `uv pip install -r requirements.txt` | å®‰è£…ä¾èµ– |
| `pip install -i https://pypi.tuna.tsinghua.edu.cn/simple` | `uv pip install --index-url https://pypi.tuna.tsinghua.edu.cn/simple` | ä½¿ç”¨å›½å†…é•œåƒ |
| `pip list` | `uv pip list` | æŸ¥çœ‹å·²å®‰è£…çš„åŒ… |
| `pip freeze > requirements.txt` | `uv pip freeze > requirements.txt` | å¯¼å‡ºä¾èµ–åˆ—è¡¨ |

---

## â— å¸¸è§é—®é¢˜

### Q1: æç¤º "command not found: uv"
```bash
# é‡æ–°åŠ è½½ shell é…ç½®
source ~/.bashrc  # æˆ– ~/.zshrc

# æˆ–æ‰‹åŠ¨å®‰è£…
curl -LsSf https://astral.sh/uv/install.sh | sh
```

### Q2: æ¿€æ´»åæ²¡æœ‰ (.venv) æ ‡è¯†
- æ£€æŸ¥æ˜¯å¦ä½¿ç”¨æ­£ç¡®çš„æ¿€æ´»å‘½ä»¤ï¼ˆWindows/Mac å‘½ä»¤ä¸åŒï¼‰
- æ£€æŸ¥ `.venv` æ–‡ä»¶å¤¹æ˜¯å¦åˆ›å»ºæˆåŠŸï¼š`ls -la .venv/`

### Q3: å®‰è£…ä¾èµ–æ—¶æŠ¥é”™
```bash
# å…ˆå‡çº§ uv
uv self update

# å†å®‰è£…ä¾èµ–
uv pip install -r requirements.txt
```

### Q4: å¦‚ä½•åˆ é™¤è™šæ‹Ÿç¯å¢ƒï¼Ÿ
```bash
# ç›´æ¥åˆ é™¤ .venv æ–‡ä»¶å¤¹
deactivate  # å…ˆé€€å‡º
rm -rf .venv  # Mac/Linux
rmdir /s .venv  # Windows
```

### Q5: uv å’Œä¼ ç»Ÿ venv æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
```bash
# uv é»˜è®¤åˆ›å»º .venvï¼ˆéšè—æ–‡ä»¶å¤¹ï¼‰
uv venv

# ä¼ ç»Ÿæ–¹å¼åˆ›å»º venvï¼ˆæ™®é€šæ–‡ä»¶å¤¹ï¼‰
python -m venv venv

# ä¸¤è€…åŠŸèƒ½ç›¸åŒï¼Œåªæ˜¯æ–‡ä»¶å¤¹å‘½åä¸åŒ
```

---

## âœ… æ£€æŸ¥æ¸…å•

åœ¨å¼€å§‹é¡¹ç›®å¼€å‘å‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] å·²å®‰è£… uv `uv --version`
- [ ] å·²åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ `uv venv`
- [ ] å·²æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆçœ‹åˆ° `(.venv)` æ ‡è¯†ï¼‰
- [ ] å·²å®‰è£…ä¾èµ– `uv pip install -r requirements.txt`
- [ ] å·²é…ç½® `.env` æ–‡ä»¶
- [ ] å·²æµ‹è¯•æ•°æ®åº“è¿æ¥ `python db/connect.py`

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ°¸è¿œä¸è¦** å°† `.venv` æ–‡ä»¶å¤¹æäº¤åˆ° Gitï¼ˆå·²åœ¨ `.gitignore` ä¸­æ’é™¤ï¼‰
2. **æ¯æ¬¡å¼€å‘å‰** éƒ½è¦æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
3. **å®‰è£…æ–°åŒ…å** è®°å¾—æ›´æ–° `requirements.txt`ï¼š`uv pip freeze > requirements.txt`
4. **æ—§é¡¹ç›®è¿ç§»**ï¼šå¦‚æœçœ‹åˆ° `venv/` æ–‡ä»¶å¤¹ï¼Œå¯ä»¥åˆ é™¤å®ƒï¼Œæ”¹ç”¨ `uv venv` åˆ›å»º `.venv/`
